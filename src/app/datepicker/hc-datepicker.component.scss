@import '~@healthcatalyst/cashmere/scss/colors';
@import '~@healthcatalyst/cashmere/scss/typography';
@import '~@healthcatalyst/cashmere/scss/functions';
@import '~@healthcatalyst/cashmere/scss/mixins';


.mat-datepicker-content {
    width: 296px;
    height: 354px;
}

.hc-datepicker-header {
    display: flex;
    align-items: center;
    width: 262px;
    border-bottom: 2px solid #e0e0e0;
    flex-wrap: wrap;
    margin-bottom: 10px;
}

.hc-datepicker-header-left {
    margin-right: auto 4px;
    cursor: pointer;
    padding: 10px;
}

.hc-datepicker-header-right {
    margin-left: auto;
    margin-right: 5px;
    display: flex;
}

.hc-datepicker-header-text {
    @include fontSize(14px);
    color: $gray-500;
}

.hc-datepicker-header-chevron {
    margin-left: 8px;
    width: 11px;
    height: 8px;
    display: inline-flex;
    background-repeat: no-repeat;
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMSA3LjA2MSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzAwYWVmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9IlBhdGhfMTMiIGRhdGEtbmFtZT0iUGF0aCAxMyIgY2xhc3M9ImNscy0xIiBkPSJNMTEuNDc2LTQuODM5YS40NDEuNDQxLDAsMCwwLDAtLjYyMUwxMC4zNDMtNi41ODdhLjQzMy40MzMsMCwwLDAtLjYxNCwwTDYuMS0yLjk2MiwyLjQ4LTYuNTg3YS40MzMuNDMzLDAsMCwwLS42MTQsMEwuNzMyLTUuNDYxYS40NDEuNDQxLDAsMCwwLDAsLjYyMUw1LjguMjE5YS40MzMuNDMzLDAsMCwwLC42MTQsMFoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0wLjYwNCA2LjcxNSkiLz4KPC9zdmc+Cg==');
}

.hc-datepicker-header-chevron-up {
    margin-left: 8px;
    width: 11px;
    height: 8px;
    display: inline-flex;
    background-repeat: no-repeat;
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxMSA3LjA2MSI+CiAgPGRlZnM+CiAgICA8c3R5bGU+CiAgICAgIC5jbHMtMSB7CiAgICAgICAgZmlsbDogIzAwYWVmZjsKICAgICAgfQogICAgPC9zdHlsZT4KICA8L2RlZnM+CiAgPHBhdGggaWQ9ImNoZXZyb24iIGNsYXNzPSJjbHMtMSIgZD0iTTExLjQ3Ni00LjgzOWEuNDQxLjQ0MSwwLDAsMCwwLS42MjFMMTAuMzQzLTYuNTg3YS40MzMuNDMzLDAsMCwwLS4zMDctLjEyOC40MzMuNDMzLDAsMCwwLS4zMDcuMTI4TDYuMS0yLjk2MiwyLjQ4LTYuNTg3YS40MzMuNDMzLDAsMCwwLS4zMDctLjEyOC40MzMuNDMzLDAsMCwwLS4zMDcuMTI4TC43MzItNS40NjFhLjQ0MS40NDEsMCwwLDAsMCwuNjIxTDUuOC4yMTlhLjQzMy40MzMsMCwwLDAsLjMwNy4xMjhBLjQzMy40MzMsMCwwLDAsNi40MTQuMjE5WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTEuNjA0IDAuMzQ3KSByb3RhdGUoMTgwKSIvPgo8L3N2Zz4K');
}

.hc-datepicker-header-button {
    cursor: pointer;
    padding: 9px;
}

.hc-datepicker-header-leftButton {
    width: 7px;
    height: 12px;
    display: inline-flex;
    background-repeat: no-repeat;
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3IDEyIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsOiAjMDBhZWZmOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cGF0aCBpZD0iUGF0aF8xNiIgZGF0YS1uYW1lPSJQYXRoIDE2IiBjbGFzcz0iY2xzLTEiIGQ9Ik03LjU3MS05LjUzNmEuNzcuNzcsMCwwLDAtLjc3OC0uNzUuNzg4Ljc4OCwwLDAsMC0uNTQ3LjIyM0wuOC00LjgxM2EuNzMzLjczMywwLDAsMC0uMjMxLjUyN0EuNzMzLjczMywwLDAsMCwuOC0zLjc1OGw1LjQ0NCw1LjI1YS43ODguNzg4LDAsMCwwLC41NDcuMjIzLjc3Ljc3LDAsMCwwLC43NzgtLjc1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTAuNTcxIDEwLjI4NikiLz4KPC9zdmc+Cg==');
}

.hc-datepicker-header-today {
    font-weight: 600;
    color: $primary-brand;
    @include fontSize(12px);
    padding: 10px;
    cursor: pointer;
}

.hc-datepicker-header-rightButton {
    width: 7px;
    height: 12px;
    display: inline-flex;
    background-repeat: no-repeat;
    background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3IDEyIj4KICA8ZGVmcz4KICAgIDxzdHlsZT4KICAgICAgLmNscy0xIHsKICAgICAgICBmaWxsOiAjMDBhZWZmOwogICAgICB9CiAgICA8L3N0eWxlPgogIDwvZGVmcz4KICA8cGF0aCBpZD0iUGF0aF8xNyIgZGF0YS1uYW1lPSJQYXRoIDE3IiBjbGFzcz0iY2xzLTEiIGQ9Ik03LjU3MS05LjUzNmEuNzcuNzcsMCwwLDAtLjc3OC0uNzUuNzg4Ljc4OCwwLDAsMC0uNTQ3LjIyM0wuOC00LjgxM2EuNzMzLjczMywwLDAsMC0uMjMxLjUyN0EuNzMzLjczMywwLDAsMCwuOC0zLjc1OGw1LjQ0NCw1LjI1YS43ODguNzg4LDAsMCwwLC41NDcuMjIzLjc3Ljc3LDAsMCwwLC43NzgtLjc1WiIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoNy41NzEgMS43MTQpIHJvdGF0ZSgxODApIi8+Cjwvc3ZnPgo=');
}

.hc-datepicker-header-weekdays {
    margin: 10px 5px;
}

.hc-datepicker-header-label {
    @include fontSize(9px);
    color: $gray-500;
    width: 36px;
    display: inline-block;
    text-align: center;
}

.hc-datepicker-body {
    @include fontSize(11px);
    color: $gray-500;
    margin: 5px;
    font-weight: 600;
}

.hc-datepicker-body-date {
    width: 36px;
    height: 36px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;

    &:not(.hc-datepicker-other-month) {
        &:hover {
            .hc-datepicker-body-circle {
                border: 2px solid darken($primary-brand, 10%);
            }
        }
    }

    &.hc-datepicker-selected {
        .hc-datepicker-body-circle {
            background-color: darken($primary-brand, 10%);
            color: $white;
            font-weight: 700;
        }
    }

    &.hc-datepicker-today {
        .hc-datepicker-body-circle {
            background-color: $slate-gray-200;
        }
    }

    &.hc-datepicker-range {
        .hc-datepicker-body-circle {
            background-color: darken($primary-brand, 10%);
            border-radius: 0;
            width: 36px;
            color: $white;
        }
    }

    &.hc-datepicker-range-start {
        height: 29px;
        background: linear-gradient(to right, $white 50%, darken($primary-brand, 10%) 51%);

        .hc-datepicker-body-circle {
            background-color: $white;
            border: 2px solid darken($primary-brand, 10%);
        }
    }

    &.hc-datepicker-range-end {
        height: 29px;
        background: linear-gradient(to right, darken($primary-brand, 10%) 50%, $white 51%);

        .hc-datepicker-body-circle {
            background-color: $white;
            border: 2px solid darken($primary-brand, 10%);
        }
    }

    &.hc-datepicker-other-month {
        color: $slate-gray-300;
        font-weight: normal;
        cursor: unset;
    }
}

.hc-datepicker-body-circle {
    border-radius: 50%;
    width: 29px;
    height: 29px;
    display: flex;
    justify-content: center;
    align-items: center;
    padding-bottom: 1px;
}

.hc-datepicker-body-year {
    width: 63px;
    height: 36px;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    cursor: pointer;

    .hc-datepicker-body-circle {
        width: 56px !important;
        border-radius: 28px !important;
    }

    &:hover {
        .hc-datepicker-body-circle {
            border: 2px solid darken($primary-brand, 10%);
        }
    }

    &.hc-datepicker-selected {
        .hc-datepicker-body-circle {
            background-color: darken($primary-brand, 10%);
            color: $white;
            font-weight: 700;
        }
    }

    &.hc-datepicker-today {
        .hc-datepicker-body-circle {
            background-color: $slate-gray-200;
        }
    }
}

// ************************************************************************************************************************************************************************************
// ********************************************************************** MATERIAL ****************************************************************************************************
// ************************************************************************************************************************************************************************************


$mat-datepicker-calendar-padding: 8px;
$mat-datepicker-non-touch-calendar-cell-size: 40px;
$mat-datepicker-non-touch-calendar-width: $mat-datepicker-non-touch-calendar-cell-size * 7 + $mat-datepicker-calendar-padding * 2;
// Based on the natural height of the calendar in a month with 6 rows of dates
// (largest the calendar will get).
$mat-datepicker-non-touch-calendar-height: 354px;

// Ideally the calendar would have a constant aspect ratio, no matter its size, and we would base
// these measurements off the aspect ratio. Unfortunately, the aspect ratio does change a little as
// the calendar grows, since some of the elements have pixel-based sizes. These numbers have been
// chosen to minimize extra whitespace at larger sizes, while still ensuring we won't need
// scrollbars at smaller sizes.
$mat-datepicker-touch-landscape-width: 64vh;
$mat-datepicker-touch-landscape-height: 80vh;
$mat-datepicker-touch-portrait-width: 80vw;
$mat-datepicker-touch-portrait-height: 100vw;
$mat-datepicker-touch-min-width: 250px;
$mat-datepicker-touch-min-height: 312px;
$mat-datepicker-touch-max-width: 750px;
$mat-datepicker-touch-max-height: 788px;

.mat-datepicker-content {
    display: block;
    border-radius: 4px;

    .mat-calendar {
        width: $mat-datepicker-non-touch-calendar-width;
        height: $mat-datepicker-non-touch-calendar-height;
    }
}

.mat-datepicker-content-touch {
    display: block;
    // make sure the dialog scrolls rather than being cropped on ludicrously small screens
    max-height: 80vh;
    overflow: auto;

    // TODO(mmalerba): hack to offset the padding of the dialog. Can be removed when we switch away
    // from using dialog.
    margin: -24px;

    .mat-calendar {
        min-width: $mat-datepicker-touch-min-width;
        min-height: $mat-datepicker-touch-min-height;
        max-width: $mat-datepicker-touch-max-width;
        max-height: $mat-datepicker-touch-max-height;
    }
}

@media all and (orientation: landscape) {
    .mat-datepicker-content-touch .mat-calendar {
        width: $mat-datepicker-touch-landscape-width;
        height: $mat-datepicker-touch-landscape-height;
    }
}

@media all and (orientation: portrait) {
    .mat-datepicker-content-touch .mat-calendar {
        width: $mat-datepicker-touch-portrait-width;
        height: $mat-datepicker-touch-portrait-height;
    }
}

$mat-datepicker-selected-today-box-shadow-width: 1px;
$mat-datepicker-selected-fade-amount: 0.6;
$mat-datepicker-today-fade-amount: 0.2;
$mat-calendar-body-font-size: 13px !default;
$mat-calendar-weekday-table-font-size: 11px !default;

@mixin _mat-datepicker-color($palette) {
    .mat-calendar-body-selected {
        background-color: mat-color($palette);
        color: mat-color($palette, default-contrast);
    }

    .mat-calendar-body-disabled > .mat-calendar-body-selected {
        background-color: fade-out(mat-color($palette), $mat-datepicker-selected-fade-amount);
    }

    .mat-calendar-body-today.mat-calendar-body-selected {
        box-shadow: inset 0 0 0 $mat-datepicker-selected-today-box-shadow-width mat-color($palette, default-contrast);
    }
}

// ************************************************************************************************************************************************************************************
// ********************************************************************** THEME    ****************************************************************************************************
// ************************************************************************************************************************************************************************************

$foreground: red;
$background: blue;

.mat-calendar-arrow {
    border-top-color: $primary-brand;//mat-color($foreground, icon);
}

// The prev/next buttons need a bit more specificity to
// avoid being overwritten by the .mat-icon-button.
.mat-datepicker-toggle,
.mat-datepicker-content .mat-calendar-next-button,
.mat-datepicker-content .mat-calendar-previous-button {
    color: $primary-brand;//mat-color($foreground, icon);
}

.mat-calendar-table-header {
    color: $primary-brand;//mat-color($foreground, hint-text);
}

.mat-calendar-table-header-divider::after {
    background: $primary-brand;//mat-color($foreground, divider);
}

.mat-calendar-body-label {
    color: $primary-alt-action;//mat-color($foreground, secondary-text);
}

.mat-calendar-body-cell-content {
    color: $primary-brand;//mat-color($foreground, text);
    border-color: transparent;
}

.mat-calendar-body-disabled > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
    color: tint($primary-brand, 75%);//mat-color($foreground, disabled-text);
}

.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover,
.cdk-keyboard-focused .mat-calendar-body-active,
.cdk-program-focused .mat-calendar-body-active {
    & > .mat-calendar-body-cell-content:not(.mat-calendar-body-selected) {
        background-color: $block-text-background;//mat-color($background, hover);
    }
}

.mat-calendar-body-today:not(.mat-calendar-body-selected) {
    // Note: though it's not text, the border is a hint about the fact that this is today's date,
    // so we use the hint color.
    border-color: $text;//mat-color($foreground, hint-text);
}

.mat-calendar-body-disabled > .mat-calendar-body-today:not(.mat-calendar-body-selected) {
    border-color: $text;//fade-out(mat-color($foreground, hint-text), $mat-datepicker-today-fade-amount);
}

// @include _mat-datepicker-color(map-get($theme, primary));

.mat-datepicker-content {
    // @include _mat-theme-elevation(4, $theme);
    background-color: $block-text-background;//mat-color($background, card);
    color: $text;//mat-color($foreground, text);

    // &.mat-accent {
    //     @include _mat-datepicker-color(map-get($theme, accent));
    // }

    // &.mat-warn {
    //     @include _mat-datepicker-color(map-get($theme, warn));
    // }
}

.mat-datepicker-content-touch {
    // @include _mat-theme-elevation(0, $theme);
}

.mat-datepicker-toggle-active {
    color: $primary-brand;//mat-color(map-get($theme, primary));

    &.mat-accent {
        color: $primary-alt-action;//mat-color(map-get($theme, accent));
    }

    &.mat-warn {
        color: $destructive-action;//mat-color(map-get($theme, warn));
    }
}

@mixin mat-datepicker-typography($config) {
    // .mat-calendar {
    //     font-family: mat-font-family($config);
    // }

    .mat-calendar-body {
        font-size: $default-font-size;//$mat-calendar-body-font-size;
    }

    .mat-calendar-body-label,
    .mat-calendar-period-button {
        font: {
            size: $default-font-size;//mat-font-size($config, button);
            // weight: mat-font-weight($config, button);
        }
    }

    .mat-calendar-table-header th {
        font: {
            size: $default-font-size;//$mat-calendar-weekday-table-font-size;
            // weight: mat-font-weight($config, body-1);
        }
    }
}
